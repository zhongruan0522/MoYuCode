# 常见问题 (FAQ)

## 基础问题

### Q: 为什么需要FFmpeg？
A: FFmpeg是一个强大的多媒体处理工具，本工具使用它从视频中提取关键帧。没有FFmpeg，帧提取功能将无法工作。

### Q: 分析一个视频需要多长时间？
A: 取决于多个因素：
- 视频长度
- 帧提取间隔和最大帧数
- 网络速度（下载阶段）
- AI分析并行度

一般来说，10分钟视频（默认设置）约需5-10分钟完成分析。

### Q: 支持哪些视频格式？
A: 支持B站所有可播放的视频格式。系统使用yt-dlp下载，会自动选择最佳质量。

## 错误处理

### Q: 遇到"URL无效"错误怎么办？
A: 请确保URL格式正确：
- 标准格式: `https://www.bilibili.com/video/BV1xx411c7mD`
- 短链接: `https://b23.tv/xxxxx`
- 不支持番剧、直播等其他类型链接

### Q: 下载失败怎么办？
A: 可能的原因和解决方案：
1. **网络问题**: 检查网络连接，使用`--retries`增加重试次数
2. **视频不存在**: 确认视频未被删除或设为私有
3. **地区限制**: 某些视频可能有地区限制

### Q: FFmpeg报错怎么办？
A: 
1. 确认FFmpeg已正确安装: `ffmpeg -version`
2. 确认FFmpeg在系统PATH中
3. 尝试重新安装FFmpeg

### Q: AI分析失败怎么办？
A: 系统会自动重试失败的分析任务。如果仍然失败：
1. 检查Claude Code配置
2. 查看日志文件了解详细错误
3. 部分结果会保存到`partial_report.json`

## 高级用法

### Q: 如何只分析视频的特定部分？
A: 目前不支持指定时间范围，但可以通过调整参数间接实现：
- 增大`--interval`跳过更多内容
- 减小`--max-frames`限制分析帧数

### Q: 如何提高分析速度？
A: 
1. 增加并行worker: `-w 8`
2. 减少帧数: `-m 20`
3. 增大间隔: `-i 60`
4. 禁用场景检测: `--no-scene-detection`

### Q: 如何获取更详细的分析？
A: 
1. 减小帧间隔: `-i 10`
2. 增加最大帧数: `-m 100`
3. 启用所有分析焦点: `-f text,objects,faces,actions,scene`

### Q: 分析中断后如何恢复？
A: 系统会自动保存检查点。目前需要重新运行命令，未来版本将支持从检查点恢复。

## 输出相关

### Q: 报告中的图片路径是什么格式？
A: 使用相对路径，格式为`./frames/frame_XXX_HH-MM-SS.jpg`，确保报告和frames目录在同一位置时图片可正常显示。

### Q: 日志文件在哪里？
A: 日志文件`analysis.log`位于输出目录中，与`report.md`同级。

## 错误代码

| 错误 | 原因 | 解决方案 |
|------|------|----------|
| `URLValidationError` | URL格式不正确 | 使用正确的B站视频URL |
| `MetadataFetchError` | 无法获取视频信息 | 检查视频是否存在/私有 |
| `DownloadError` | 下载失败 | 检查网络，增加重试次数 |
| `FFmpegError` | FFmpeg问题 | 安装/重装FFmpeg |
| `AnalysisError` | AI分析失败 | 检查Claude Code配置 |
| `ReportGenerationError` | 报告生成失败 | 检查输出目录权限 |
