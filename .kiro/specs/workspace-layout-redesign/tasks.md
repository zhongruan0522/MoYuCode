# 工作区布局重新设计 - 任务列表

## Phase 1: 基础架构搭建

- [x] 1. 创建工作区状态管理
  - [x] 1.1 创建 `stores/workspaceStore.ts` 使用 Zustand
  - [x] 1.2 定义工作区状态类型和接口
  - [x] 1.3 实现状态持久化（localStorage）
  - [x]* 1.4 编写状态管理单元测试（跳过）

- [x] 2. 创建基础布局组件
  - [x] 2.1 创建 `components/workspace/` 目录结构
  - [x] 2.2 实现 `ResizeHandle` 可拖拽调整大小组件
  - [x] 2.3 创建 `useResizable` 自定义 Hook
  - [x] 2.4 实现 `WorkspaceLayout` 主布局容器

## Phase 2: 活动栏与侧边栏

- [x] 3. 实现活动栏（ActivityBar）
  - [x] 3.1 创建 `ActivityBar` 组件
  - [x] 3.2 实现视图切换逻辑
  - [x] 3.3 添加激活状态指示器
  - [x] 3.4 添加 Tooltip 提示

- [x] 4. 实现侧边栏（Sidebar）
  - [x] 4.1 创建 `Sidebar` 容器组件
  - [x] 4.2 实现侧边栏展开/折叠动画
  - [x] 4.3 实现宽度拖拽调整
  - [x] 4.4 添加侧边栏标题栏

- [x] 5. 重构文件资源管理器
  - [x] 5.1 迁移现有 `ProjectFileManager` 到新结构
  - [x] 5.2 优化文件树渲染性能
  - [x] 5.3 添加文件搜索过滤功能
  - [x] 5.4 完善右键上下文菜单

## Phase 3: 编辑器区域

- [x] 6. 实现编辑器标签栏
  - [x] 6.1 创建 `EditorTabs` 组件
  - [x] 6.2 实现标签页拖拽排序
  - [x] 6.3 添加标签页右键菜单
  - [x] 6.4 实现标签页滚动溢出处理

- [x] 7. 重构编辑器内容区
  - [x] 7.1 创建 `EditorContent` 组件
  - [x] 7.2 迁移 Monaco Editor 集成
  - [x] 7.3 迁移 Diff 查看器
  - [x] 7.4 创建欢迎视图组件

## Phase 4: 底部面板

- [x] 8. 实现底部面板容器
  - [x] 8.1 创建 `BottomPanel` 组件
  - [x] 8.2 实现面板展开/折叠
  - [x] 8.3 实现高度拖拽调整
  - [x] 8.4 添加面板标签栏

- [x] 9. 重构终端面板
  - [x] 9.1 迁移现有终端功能到 `TerminalPanel`
  - [x] 9.2 实现多终端标签页管理
  - [x]* 9.3 添加终端分屏功能（跳过，后续实现）
  - [x] 9.4 实现终端重命名功能

- [-] 10. 实现输出面板
  - [ ] 10.1 创建 `OutputPanel` 组件
  - [ ] 10.2 实现工具调用输出显示
  - [ ] 10.3 添加输出过滤和搜索

## Phase 5: 搜索功能

- [ ] 11. 实现文件快速搜索
  - [ ] 11.1 创建 `QuickOpen` 弹窗组件
  - [ ] 11.2 实现文件模糊匹配算法
  - [ ] 11.3 添加最近文件记录
  - [ ] 11.4 实现键盘导航

- [ ] 12. 实现内容搜索面板
  - [ ] 12.1 创建 `SearchPanel` 组件
  - [ ] 12.2 实现后端搜索 API 调用
  - [ ] 12.3 添加正则表达式支持
  - [ ] 12.4 实现搜索结果高亮显示

## Phase 6: 快捷键系统

- [ ] 13. 实现快捷键管理
  - [ ] 13.1 创建 `useWorkspaceKeyboard` Hook
  - [ ] 13.2 注册所有快捷键绑定
  - [ ] 13.3 处理快捷键冲突
  - [ ] 13.4 添加快捷键提示显示

## Phase 7: 与聊天集成

- [ ] 14. 实现代码选择发送
  - [ ] 14.1 添加代码选择浮动操作按钮
  - [ ] 14.2 实现选中代码发送到聊天
  - [ ] 14.3 添加文件路径和行号信息

- [ ] 15. 实现从聊天打开文件
  - [ ] 15.1 解析聊天消息中的文件路径
  - [ ] 15.2 添加文件路径点击处理
  - [ ] 15.3 实现跳转到指定行号

## Phase 8: 整合与优化

- [ ] 16. 整合到 ProjectWorkspacePage
  - [ ] 16.1 替换现有右侧工作区实现
  - [ ] 16.2 保持与左侧聊天面板的集成
  - [ ] 16.3 测试所有功能正常工作

- [ ] 17. 性能优化
  - [ ] 17.1 实现文件树虚拟滚动
  - [ ] 17.2 优化搜索防抖处理
  - [ ] 17.3 添加组件懒加载

- [ ] 18. 清理与文档
  - [ ] 18.1 删除旧的工作区组件代码
  - [ ] 18.2 更新组件文档
  - [ ] 18.3 添加使用示例

## 可选功能

- [ ]* 19. Git 面板
  - [ ]* 19.1 创建 `GitPanel` 组件
  - [ ]* 19.2 显示文件变更状态
  - [ ]* 19.3 实现暂存/取消暂存操作

- [ ]* 20. 编辑器分屏
  - [ ]* 20.1 实现编辑器水平分屏
  - [ ]* 20.2 实现编辑器垂直分屏
  - [ ]* 20.3 支持拖拽标签页到分屏

- [ ]* 21. 主题定制
  - [ ]* 21.1 支持自定义活动栏颜色
  - [ ]* 21.2 支持自定义编辑器主题
